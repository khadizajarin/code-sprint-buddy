{
  "version": 3,
  "sources": ["../src/background.ts"],
  "sourcesContent": ["let sprintStartTime: number | null = null;\nlet sprintDuration = 1 * 60 * 1000; // 20 minutes in milliseconds\nlet sprintTimer: number | null = null;\n\n\n// function endSprint() {\n//   chrome.notifications.create({\n//     type: \"basic\",\n//     iconUrl: \"icons/icon48.png\",\n//     title: \"Sprint Finished!\",\n//     message: \"20-minute sprint complete! Time to take a break. \uD83E\uDDD8\u200D\u2640\uFE0F\",\n//   });\n\n//   // Notify content script to play sound\n//   chrome.tabs.query({}, (tabs) => {\n//     tabs.forEach((tab) => {\n//       if (tab.id) {\n//         chrome.tabs.sendMessage(tab.id, { type: \"PLAY_SOUND\" });\n//       }\n//     });\n//   });\n\n  \n//   sprintStartTime = null;\n//   sprintTimer = null;\n// }\n\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n  if (request.type === \"START\") {\n    if (!sprintStartTime) {\n      sprintStartTime = Date.now();\n\n      sprintTimer = setTimeout(() => {\n        endSprint();\n      }, sprintDuration);\n\n      chrome.notifications.create({\n        type: \"basic\",\n        iconUrl: \"icons/icon48.png\",\n        title: \"Sprint Started!\",\n        message: \"Your 20-minute coding sprint has begun. Let\u2019s go! \uD83D\uDE80\",\n      });\n\n      // Sound\n      chrome.tabs.query({}, (tabs) => {\n        tabs.forEach((tab) => {\n          if (tab.id) {\n            chrome.tabs.sendMessage(tab.id, { type: \"PLAY_SOUND\" });\n          }\n        });\n      });\n    }\n    \n\n    sendResponse({ status: \"started\" });\n  }\n\n  if (request.type === \"STATUS\") {\n    if (sprintStartTime) {\n      const elapsed = Date.now() - sprintStartTime;\n      const timeLeft = Math.max(0, Math.floor((sprintDuration - elapsed) / 1000));\n      sendResponse({ running: true, timeLeft });\n    } else {\n      sendResponse({ running: false, timeLeft: sprintDuration / 1000 });\n    }\n    return true; // Indicate async response\n  }\n});\n\nfunction playNotificationSound() {\n  chrome.windows.create({\n    url: chrome.runtime.getURL(\"sound.html\"),\n    type: \"popup\",\n    width: 1,\n    height: 1,\n    left: 0,\n    top: 0,\n    focused: false\n  });\n}\n\nfunction endSprint() {\n  chrome.notifications.create({\n    type: \"basic\",\n    iconUrl: \"icons/icon48.png\",\n    title: \"Sprint Finished!\",\n    message: \"20-minute sprint complete! Time to take a break. \uD83E\uDDD8\u200D\u2640\uFE0F\",\n  });\n\n  playNotificationSound(); // \uD83D\uDC48 plays sound in a hidden popup\n\n  sprintStartTime = null;\n  sprintTimer = null;\n}\n"],
  "mappings": "mBAAA,IAAIA,EAAiC,KACjCC,EAAiB,EAAI,GAAK,IAC1BC,EAA6B,KAyBjC,OAAO,QAAQ,UAAU,YAAY,CAACC,EAASC,EAAQC,IAAiB,CA8BtE,GA7BIF,EAAQ,OAAS,UACdH,IACHA,EAAkB,KAAK,IAAI,EAE3BE,EAAc,WAAW,IAAM,CAC7BI,EAAU,CACZ,EAAGL,CAAc,EAEjB,OAAO,cAAc,OAAO,CAC1B,KAAM,QACN,QAAS,mBACT,MAAO,kBACP,QAAS,kEACX,CAAC,EAGD,OAAO,KAAK,MAAM,CAAC,EAAIM,GAAS,CAC9BA,EAAK,QAASC,GAAQ,CAChBA,EAAI,IACN,OAAO,KAAK,YAAYA,EAAI,GAAI,CAAE,KAAM,YAAa,CAAC,CAE1D,CAAC,CACH,CAAC,GAIHH,EAAa,CAAE,OAAQ,SAAU,CAAC,GAGhCF,EAAQ,OAAS,SAAU,CAC7B,GAAIH,EAAiB,CACnB,IAAMS,EAAU,KAAK,IAAI,EAAIT,EACvBU,EAAW,KAAK,IAAI,EAAG,KAAK,OAAOT,EAAiBQ,GAAW,GAAI,CAAC,EAC1EJ,EAAa,CAAE,QAAS,GAAM,SAAAK,CAAS,CAAC,CAC1C,MACEL,EAAa,CAAE,QAAS,GAAO,SAAUJ,EAAiB,GAAK,CAAC,EAElE,MAAO,EACT,CACF,CAAC,EAED,SAASU,GAAwB,CAC/B,OAAO,QAAQ,OAAO,CACpB,IAAK,OAAO,QAAQ,OAAO,YAAY,EACvC,KAAM,QACN,MAAO,EACP,OAAQ,EACR,KAAM,EACN,IAAK,EACL,QAAS,EACX,CAAC,CACH,CAEA,SAASL,GAAY,CACnB,OAAO,cAAc,OAAO,CAC1B,KAAM,QACN,QAAS,mBACT,MAAO,mBACP,QAAS,8EACX,CAAC,EAEDK,EAAsB,EAEtBX,EAAkB,KAClBE,EAAc,IAChB",
  "names": ["sprintStartTime", "sprintDuration", "sprintTimer", "request", "sender", "sendResponse", "endSprint", "tabs", "tab", "elapsed", "timeLeft", "playNotificationSound"]
}
